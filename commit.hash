#!/bin/bash

# Stop if any command fails
set -e

# Ensure we're inside a git repo
if [ ! -d ".git" ]; then
  echo "âŒ Not a git repository. Run git init first."
  exit 1
fi

# Files/folders to ignore
IGNORE_PATHS=(
  ".git"
  "node_modules"
  ".env"
  ".env.local"
  "dist"
  "build"
)

# Function to check ignored paths
is_ignored () {
  for ignore in "${IGNORE_PATHS[@]}"; do
    if [[ "$1" == *"$ignore"* ]]; then
      return 0
    fi
  done
  return 1
}

# Get all files (tracked + untracked)
FILES=$(find . -type f | sort)

for file in $FILES; do
  is_ignored "$file" && continue

  # Skip if already committed
  git ls-files --error-unmatch "$file" > /dev/null 2>&1 && continue

  git add "$file"
  git commit -m "created ${file#./}"

  echo "âœ… Committed: $file"
done

echo "ðŸŽ‰ All files committed individually!"
